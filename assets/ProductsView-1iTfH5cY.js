import{a as c}from"./axios-L6U4YIEh.js";import{_ as m,c as n,a as e,F as d,e as u,n as _,f as h,o,t as l}from"./index-LjKqdEST.js";var g={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"colorgolden",BASE_URL:"/vue_week6_homework/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:p}=g,{VITE_PATH:f}=g,k={data(){return{temp:{},products:[],data_id:"",data_name:"",pages:{},newProduct:{is_enabled:1,imageUrl:"",imagesUrl:[""]}}},created(){this.checkLogin()},methods:{checkLogin(){const i=document.cookie.replace(/(?:(?:^|.*;\s*)newToken\s*=\s*([^;]*).*$)|^.*$/,"$1");c.defaults.headers.common.Authorization=i,c.post(`${p}/v2/api/user/check`,{},{headers:{Authorization:i}}).then(()=>{this.getProducts()}).catch(()=>{alert("尚未登入會員，請重新登入！"),this.$router.push("../login")})},getProducts(i=1){c.get(`${p}/v2/api/${f}/admin/products?page=${i}`).then(s=>{this.products=s.data.products,this.pages=s.data.pagination}).catch(s=>{alert(s.data.message)})}}},v=e("hr",null,null,-1),w=e("h4",null,"後台產品列表",-1),x={class:"container"},y={class:"table mt-4"},P=e("thead",null,[e("tr",null,[e("th",{width:"120"}," 分類 "),e("th",null,"產品名稱"),e("th",{width:"120"}," 原價 "),e("th",{width:"120"}," 售價 "),e("th",{width:"100"}," 是否啟用 ")])],-1),b={class:"text-end"},E={class:"text-end"},T={key:0,class:"text-success"},V={key:1},L={"aria-label":"...",style:{display:"flex","justify-content":"center","align-items":"center"}},A={class:"pagination"},C=["onClick"];function R(i,s,U,$,a,r){return o(),n(d,null,[v,w,e("div",x,[e("table",y,[P,(o(!0),n(d,null,u(a.products,t=>(o(),n("tbody",{key:t.id},[e("tr",null,[e("td",null,l(t.category),1),e("td",null,l(t.title),1),e("td",b,l(t.origin_price),1),e("td",E,l(t.price),1),e("td",null,[t.is_enabled===1?(o(),n("span",T,"啟用")):(o(),n("span",V,"未啟用"))])])]))),128))]),e("nav",L,[e("ul",A,[e("li",{class:_(["page-item",{disabled:a.pages.has_pre==!1}])},[e("a",{class:"page-link",href:"#",onClick:s[0]||(s[0]=h(t=>r.getProducts(a.pages.current_page-1),["prevent"]))},"上一頁")],2),(o(!0),n(d,null,u(a.pages.total_pages,t=>(o(),n("li",{key:t+123,class:_(["page-item",{active:t===a.pages.current_page}])},[e("a",{class:"page-link",href:"#",onClick:h(B=>r.getProducts(t),["prevent"])},l(t),9,C)],2))),128)),e("li",{class:_(["page-item",{disabled:a.pages.has_next===!1}])},[e("a",{class:"page-link",href:"#",onClick:s[1]||(s[1]=h(t=>r.getProducts(a.pages.current_page+1),["prevent"]))},"下一頁")],2)])])])],64)}const S=m(k,[["render",R]]);export{S as default};
